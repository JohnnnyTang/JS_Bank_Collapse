import{v as o,aa as i}from"./index-CS5ogquF.js";class u{constructor(s,a){this.modelUrl=s,this.paramsObject=a}async modelStart(){return new Promise((s,a)=>{o.post(this.modelUrl,this.paramsObject).then(e=>{console.log("model response! ",e),this.taskId=e.data,s(this.taskId)}).catch(e=>{i({title:"模型启动失败",message:`错误原因：
`+e.message,type:"error",position:"top-left",offset:130}),console.warn(e),a(e)})})}getRunningStatus(){return new Promise((s,a)=>{const e=`/model/taskNode/status/id?taskId=${this.taskId}`;o.get(e).then(t=>{console.log("running status response! ",t),this.runningStatus=t.data,s(this.runningStatus)}).catch(t=>{console.warn(t),a(t)})})}getModelResult(){return new Promise((s,a)=>{const e=`/model/taskNode/result/id?taskId=${this.taskId}`;o.get(e).then(t=>{console.log("running model result! ",t.data),this.runningResult=t.data,this.caseId=t.data["case-id"],s(this.runningResult)}).catch(t=>{console.warn(t),a(t)})})}getErrorLog(){return new Promise((s,a)=>{const e=`/model/taskNode/result/id?taskId=${this.taskId}`;o.get(e).then(t=>{let l=t.data["error-log"];s(l)}).catch(t=>{console.warn(t),a(t)})})}async getModelResultFile(s,a="json"){return new Promise((e,t)=>{let d={image:`/model/data/bankResource/down/modelServer/result/file/image?caseId=${this.caseId}&name=${s}`,json:`/model/data/bankResource/down/modelServer/result/file/json?caseId=${this.caseId}&name=${s}`}[a];o.get(d).then(n=>{console.log("running model result file! ",n.data),e(n.data)}).catch(n=>{console.warn(n),t(n)})})}}export{u as M};

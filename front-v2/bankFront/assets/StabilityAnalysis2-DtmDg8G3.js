import{_ as le,a4 as G,i as h,o as b,c as I,a as t,b as l,d as n,D as k,a5 as B,p as ne,e as ae,a6 as l1,f,g as oe,u as ye,t as z,O as H,h as n1,X as a1,a7 as s1,B as ee,C as te,F as Q,r as Y,k as N,a8 as Ie}from"./index-Bdok3Q-i.js";import{M as i1}from"./mapbox-gl-draw-DO4UArkg.js";import{M as d1}from"./ModelTitle-aAOLOkbj.js";import{F as r1}from"./notSimpleLayer-CJCKLvoH.js";const c1=s=>(ne("data-v-368baa2c"),s=s(),ae(),s),u1={class:"conditions"},m1=c1(()=>t("div",{class:"head"},[t("div",{class:"head-text"},"水文条件选择")],-1)),p1={class:"form"},_1={class:"button-container"},f1={__name:"HydrologicalCondition",emits:["close","condition"],setup(s,{emit:r}){const d=G({condition:""}),i=r,g=()=>{if(d.condition===""){B({type:"warning",offset:100,message:"请选择水文条件后再确定！"});return}else{i("condition",d.condition),i("close");return}};return(y,m)=>{const p=h("el-option"),v=h("el-select"),S=h("el-form-item"),u=h("el-button"),_=h("el-form");return b(),I("div",u1,[m1,t("div",p1,[l(_,{model:d,"label-width":"auto",style:{"max-width":"600px"}},{default:n(()=>[l(S,{label:"水文条件"},{default:n(()=>[l(v,{modelValue:d.condition,"onUpdate:modelValue":m[0]||(m[0]=E=>d.condition=E),placeholder:"请选择水文条件"},{default:n(()=>[l(p,{label:"洪季大潮",value:"洪季大潮"}),l(p,{label:"枯季小潮",value:"枯季小潮"}),l(p,{label:"20年一遇",value:"20年一遇"})]),_:1},8,["modelValue"])]),_:1}),l(S,null,{default:n(()=>[t("div",_1,[l(u,{type:"primary",onClick:g},{default:n(()=>[k("确定")]),_:1}),l(u,{onClick:m[1]||(m[1]=E=>{i("close")})},{default:n(()=>[k("取消")]),_:1})])]),_:1})]),_:1},8,["model"])])])}}},v1=le(f1,[["__scopeId","data-v-368baa2c"]]),h1=s=>(ne("data-v-22c7ec9b"),s=s(),ae(),s),y1={class:"stParams"},b1=h1(()=>t("div",{class:"head"},[t("div",{class:"head-text"},"模型参数设置")],-1)),g1={class:"form"},x1={class:"button-container"},w1={__name:"SetParameter",emits:["close","params"],setup(s,{emit:r}){const d=r,i=G({simulateHour:"72",simulateStep:"10",frictionParam:"0.013",minWaterDepth:"0.05",SmagorinskyParam:"0.23"}),g=()=>{d("params",i),d("close")};return(y,m)=>{const p=h("el-input"),v=h("el-form-item"),S=h("el-button"),u=h("el-form");return b(),I("div",y1,[b1,t("div",g1,[l(u,{model:i,"label-width":"auto",style:{"max-width":"600px"}},{default:n(()=>[l(v,{label:"模拟时间(小时)"},{default:n(()=>[l(p,{modelValue:i.simulateHour,"onUpdate:modelValue":m[0]||(m[0]=_=>i.simulateHour=_)},null,8,["modelValue"])]),_:1}),l(v,{label:"模拟步长(分钟)"},{default:n(()=>[l(p,{modelValue:i.simulateStep,"onUpdate:modelValue":m[1]||(m[1]=_=>i.simulateStep=_)},null,8,["modelValue"])]),_:1}),l(v,{label:"底摩擦系数(曼宁系数)"},{default:n(()=>[l(p,{modelValue:i.frictionParam,"onUpdate:modelValue":m[2]||(m[2]=_=>i.frictionParam=_)},null,8,["modelValue"])]),_:1}),l(v,{label:"最小水深(m)"},{default:n(()=>[l(p,{modelValue:i.minWaterDepth,"onUpdate:modelValue":m[3]||(m[3]=_=>i.minWaterDepth=_)},null,8,["modelValue"])]),_:1}),l(v,{label:"水平涡动粘性系数"},{default:n(()=>[l(p,{modelValue:i.SmagorinskyParam,"onUpdate:modelValue":m[4]||(m[4]=_=>i.SmagorinskyParam=_)},null,8,["modelValue"])]),_:1}),l(v,null,{default:n(()=>[t("div",x1,[l(S,{type:"primary",onClick:g},{default:n(()=>[k("确定")]),_:1}),l(S,{onClick:m[5]||(m[5]=_=>d("close"))},{default:n(()=>[k("取消")]),_:1})])]),_:1})]),_:1},8,["model"])])])}}},k1=le(w1,[["__scopeId","data-v-22c7ec9b"]]),Pe=l1("stability",()=>{const s=f("undefined"),r=f(0),d=f(0);return{modelStatus:s,modelProgress:r,modelStartTime:d}},{persist:{storage:sessionStorage,paths:["stability"]}}),be=s=>(ne("data-v-f7b991d7"),s=s(),ae(),s),S1={class:"stParams"},C1=be(()=>t("div",{class:"head"},[t("div",{class:"head-text"},"模型运行状况")],-1)),I1={class:"status-container"},D1={key:0},$1={class:"slider-demo-block"},P1={class:"demonstration",style:{"padding-bottom":"10px"}},M1={style:{"padding-top":"10px"}},V1={key:1,style:{width:"100%",display:"flex","justify-content":"center"}},L1=be(()=>t("div",null,"模型尚未运行",-1)),F1=[L1],A1={key:2},z1=be(()=>t("div",null,"模型运行完成",-1)),E1=[z1],j1={class:"button-container"},U1={__name:"ModelStatus",emits:["close"],setup(s,{emit:r}){const d=Pe(),i=oe(()=>Number(d.modelProgress.toFixed(3))),g=oe(()=>{const p=(Date.now()-d.modelStartTime)/1e3/d.modelProgress*(100-d.modelProgress),v=Math.floor(p/3600),S=Math.floor(p%3600/60),u=Math.floor(p%60);return S?`预计${v}小时${S}分${u}秒完成`:"预计时间正在计算中"}),y=r,m=()=>{y("close")};return(p,v)=>{const S=h("el-slider"),u=h("el-button");return b(),I("div",S1,[C1,t("div",I1,[ye(d).modelStatus==="pending"?(b(),I("div",D1,[t("div",$1,[t("div",P1,z(`当前进度: ${i.value}%`),1),l(S,{modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=_=>i.value=_),"show-tooltip":!1},null,8,["modelValue"])]),t("div",M1,z(g.value),1)])):ye(d).modelStatus==="undefined"?(b(),I("div",V1,F1)):ye(d).modelStatus==="success"?(b(),I("div",A1,E1)):H("",!0)]),t("div",j1,[l(u,{type:"primary",onClick:m},{default:n(()=>[k("确定")]),_:1})])])}}},T1=le(U1,[["__scopeId","data-v-f7b991d7"]]),N1={date:"2023-09-01",vertex:[["13417691","3767754"],["13417931","3767270"]],scene:"minzhusha",dataFolderPath:"D:\\project\\JS_Bank_Collapse\\util\\model\\multi\\data",section:[[13417687957079306e-9,3.7677558293190524e6,3.121534824371338],[13417687957079306e-9,3.7677508293190524e6,3.1434929370880127],[13417692957079306e-9,3.7677458293190524e6,3.247708320617676],[13417692957079306e-9,3.7677408293190524e6,3.2636892795562744],[13417697957079306e-9,3.7677358293190524e6,3.291696786880493],[13417697957079306e-9,3.7677308293190524e6,3.299565553665161],[13417702957079306e-9,3.7677258293190524e6,3.299978733062744],[13417702957079306e-9,3.7677208293190524e6,3.299994468688965],[13417707957079306e-9,3.7677158293190524e6,3.2999579906463623],[13417707957079306e-9,3.7677108293190524e6,3.2996816635131836],[13417712957079306e-9,3.7677058293190524e6,3.296473979949951],[13417712957079306e-9,3.7677008293190524e6,3.2823452949523926],[13417717957079306e-9,3.7676958293190524e6,3.2385687828063965],[13417717957079306e-9,3.7676908293190524e6,3.189035654067993],[13417722957079306e-9,3.7676858293190524e6,3.067615032196045],[13417722957079306e-9,3.7676808293190524e6,3.028134822845459],[13417727957079306e-9,3.7676758293190524e6,3.001678943634033],[13417727957079306e-9,3.7676708293190524e6,2.9994516372680664],[13417732957079306e-9,3.7676658293190524e6,2.9988670349121094],[13417732957079306e-9,3.7676608293190524e6,2.9878454208374023],[13417737957079306e-9,3.7676558293190524e6,2.9787704944610596],[13417737957079306e-9,3.7676508293190524e6,2.899057388305664],[13417742957079306e-9,3.7676458293190524e6,2.9546520709991455],[13417742957079306e-9,3.7676408293190524e6,2.847874164581299],[13417747957079306e-9,3.7676358293190524e6,2.8334996700286865],[13417747957079306e-9,3.7676308293190524e6,2.8156447410583496],[13417752957079306e-9,3.7676258293190524e6,2.8378868103027344],[13417752957079306e-9,3.7676208293190524e6,2.8585641384124756],[13417757957079306e-9,3.7676158293190524e6,2.8983511924743652],[13417757957079306e-9,3.7676108293190524e6,2.5130932331085205],[13417762957079306e-9,3.7676058293190524e6,1.9344098567962646],[13417762957079306e-9,3.7676008293190524e6,-1.7289330959320068],[13417767957079306e-9,3.7675958293190524e6,-13.831005096435547],[13417767957079306e-9,3.7675908293190524e6,-17.1885986328125],[13417772957079306e-9,3.7675858293190524e6,-17.408037185668945],[13417772957079306e-9,3.7675808293190524e6,-17.806724548339844],[13417777957079306e-9,3.7675758293190524e6,-17.77374267578125],[13417777957079306e-9,3.7675708293190524e6,-17.518352508544922],[13417782957079306e-9,3.7675658293190524e6,-17.223793029785156],[13417782957079306e-9,3.7675608293190524e6,-16.875864028930664],[13417787957079306e-9,3.7675558293190524e6,-16.53278160095215],[13417787957079306e-9,3.7675508293190524e6,-16.165775299072266],[13417792957079306e-9,3.7675458293190524e6,-16.063810348510742],[13417792957079306e-9,3.7675408293190524e6,-15.54920768737793],[13417797957079306e-9,3.7675358293190524e6,-14.938090324401855],[13417797957079306e-9,3.7675308293190524e6,-14.127363204956055],[13417802957079306e-9,3.7675258293190524e6,-13.364641189575195],[13417802957079306e-9,3.7675208293190524e6,-12.430339813232422],[13417807957079306e-9,3.7675158293190524e6,-11.678702354431152],[13417807957079306e-9,3.7675108293190524e6,-11.449407577514648],[13417812957079306e-9,3.7675058293190524e6,-9.874521255493164],[13417812957079306e-9,3.7675008293190524e6,-8.721687316894531],[13417817957079306e-9,3.7674958293190524e6,-6.497688293457031],[13417817957079306e-9,3.7674908293190524e6,-6.655665397644043],[13417822957079306e-9,3.7674858293190524e6,-8.162154197692871],[13417822957079306e-9,3.7674808293190524e6,-8.65102481842041],[13417827957079306e-9,3.7674758293190524e6,-11.075912475585938],[13417827957079306e-9,3.7674708293190524e6,-11.722530364990234],[13417832957079306e-9,3.7674658293190524e6,-13.258783340454102],[13417832957079306e-9,3.7674608293190524e6,-13.783803939819336],[13417837957079306e-9,3.7674558293190524e6,-14.561233520507812],[13417837957079306e-9,3.7674508293190524e6,-14.897319793701172],[13417842957079306e-9,3.7674458293190524e6,-14.745083808898926],[13417842957079306e-9,3.7674408293190524e6,-14.91735553741455],[13417847957079306e-9,3.7674358293190524e6,-14.65709114074707],[13417847957079306e-9,3.7674308293190524e6,-13.974665641784668],[13417852957079306e-9,3.7674258293190524e6,-13.366701126098633],[13417852957079306e-9,3.7674208293190524e6,-15.094374656677246],[13417857957079306e-9,3.7674158293190524e6,-16.2069149017334],[13417857957079306e-9,3.7674108293190524e6,-17.09683609008789],[13417862957079306e-9,3.7674058293190524e6,-18.026731491088867],[13417862957079306e-9,3.7674008293190524e6,-18.64005470275879],[13417867957079306e-9,3.7673958293190524e6,-19.124711990356445],[13417867957079306e-9,3.7673908293190524e6,-19.64112091064453],[13417872957079306e-9,3.7673858293190524e6,-19.74228286743164],[13417872957079306e-9,3.7673808293190524e6,-19.911325454711914],[13417877957079306e-9,3.7673758293190524e6,-20.222097396850586],[13417877957079306e-9,3.7673708293190524e6,-21.015077590942383],[13417882957079306e-9,3.7673658293190524e6,-21.347070693969727],[13417882957079306e-9,3.7673608293190524e6,-22.014921188354492],[13417887957079306e-9,3.7673558293190524e6,-22.594650268554688],[13417887957079306e-9,3.7673508293190524e6,-23.058412551879883],[13417892957079306e-9,3.7673458293190524e6,-22.975597381591797],[13417892957079306e-9,3.7673408293190524e6,-23.3878173828125],[13417897957079306e-9,3.7673358293190524e6,-23.70122718811035],[13417897957079306e-9,3.7673308293190524e6,-24.130123138427734],[13417902957079306e-9,3.7673258293190524e6,-24.493906021118164],[13417902957079306e-9,3.7673208293190524e6,-24.88259506225586],[13417907957079306e-9,3.7673158293190524e6,-25.026247024536133],[13417907957079306e-9,3.7673108293190524e6,-25.398527145385742],[13417912957079306e-9,3.7673058293190524e6,-25.830562591552734],[13417912957079306e-9,3.7673008293190524e6,-26.824321746826172],[13417917957079306e-9,3.7672958293190524e6,-26.83916473388672],[13417917957079306e-9,3.7672908293190524e6,-27.092004776000977],[13417922957079306e-9,3.7672858293190524e6,-26.90294075012207],[13417922957079306e-9,3.7672808293190524e6,-26.982824325561523],[13417927957079306e-9,3.7672758293190524e6,-27.218549728393555],[13417927957079306e-9,3.7672708293190524e6,-27.60082244873047]],isSectionWithInArea:[!0,!0],PQ:[[0,1,0,0],"低风险",.8],KY:[[0,0,0,1],"较高风险",.9067293380808618],ZD:[[0,0,0,1],"较高风险",.8233316221765914],deepestPoint:[[13417687957079306e-9,3.7677558293190524e6],3.896,1.797,2.4285],ZB:[[1,0,0,0],"较低风险",3.896],SA:[[0,1,0,0],"低风险",[.008508098125457764,.00041306018829345703,-.003069460391998291,-.011844491958618164,-.0011454224586486816,-.007263541221618652,.0032425761222839356,-.8364678144454956,-.19713687896728516,.06204805374145508,.07973456382751465,.16296939849853515,.25905070304870603,-.2289112091064453,-.17426605224609376,-.0047928810119628905,-.0774911880493164,-.14588985443115235,-.05486927032470703,-.11862764358520508,-.0553288459777832,-.06625099182128906,-.0906458854675293,-.018969249725341798,-.07645454406738281]],LN:[[0,0,0,1],"较高风险",[-.0014290809631347656,-.024257421493530273,-.006379842758178711,-.000362396240234375,-20742416381835938e-21,-5245208740234375e-21,-16689300537109375e-22,-.0005278587341308594,-.00018072128295898438,-.006606340408325195,-.013387203216552734,-.0712432861328125,-.07682418823242188,-.0541994571685791,-.03546714782714844,-.002198934555053711,-.38700222969055176,-.9655985832214355,-4.628930568695068,-16.731022119522095,-20.088642597198486,-20.309069633483887,-20.725111722946167,-21.088707208633423,-22.950204372406006,-23.242689609527588,-22.804797172546387,-22.426447868347168,-21.78517246246338,-14.056722640991211,-12.477280378341675,-11.654539346694946,-10.704403400421143,-9.916126251220703,-8.661474227905273,-6.875741004943848,-5.015869617462158,-2.245750904083252]],beforeSection:[[1341768869359842e-8,3767754371655211e-9,3.1229639053344727],[1341769369359842e-8,3767749371655211e-9,3.1159889698028564],[1341769369359842e-8,3767744371655211e-9,3.239731550216675],[1341769369359842e-8,3767739371655211e-9,3.2879467010498047],[1341769869359842e-8,3767734371655211e-9,3.298076629638672],[1341770369359842e-8,3767729371655211e-9,3.2999279499053955],[1341770369359842e-8,3767724371655211e-9,3.299999475479126],[1341770369359842e-8,3767719371655211e-9,3.299999713897705],[1341770869359842e-8,3767714371655211e-9,3.299959659576416],[1341771369359842e-8,3767709371655211e-9,3.2978639602661133],[1341771369359842e-8,3767704371655211e-9,3.2888548374176025],[1341771369359842e-8,3767699371655211e-9,3.247558116912842],[1341771869359842e-8,3767694371655211e-9,3.1743929386138916],[1341772369359842e-8,3767689371655211e-9,3.121018171310425],[1341772369359842e-8,3767684371655211e-9,3.0371713638305664],[1341772369359842e-8,3767679371655211e-9,3.010349988937378],[1341772869359842e-8,3767674371655211e-9,3.0003602504730225],[1341773369359842e-8,3767669371655211e-9,2.9999794960021973],[1341773369359842e-8,3767664371655211e-9,2.9990477561950684],[1341773369359842e-8,3767659371655211e-9,2.9944517612457275],[1341773869359842e-8,3767654371655211e-9,2.9921576976776123],[1341774369359842e-8,3767649371655211e-9,2.9703006744384766],[1341774369359842e-8,3767644371655211e-9,2.8455734252929688],[1341774369359842e-8,3767639371655211e-9,2.8091800212860107],[1341774869359842e-8,3767634371655211e-9,2.8179984092712402],[1341775369359842e-8,3767629371655211e-9,2.8924689292907715],[1341775369359842e-8,3767624371655211e-9,2.8920862674713135],[1341775369359842e-8,3767619371655211e-9,2.894031286239624],[1341775869359842e-8,3767614371655211e-9,2.900550127029419],[1341776369359842e-8,3767609371655211e-9,2.9000954627990723],[1341776369359842e-8,3767604371655211e-9,2.9000084400177],[1341776369359842e-8,3767599371655211e-9,2.8999974727630615],[1341776869359842e-8,3767594371655211e-9,2.900017023086548],[1341777369359842e-8,3767589371655211e-9,2.9000439643859863],[1341777369359842e-8,3767584371655211e-9,2.9010324478149414],[1341777369359842e-8,3767579371655211e-9,2.9183871746063232],[1341777869359842e-8,3767574371655211e-9,3.314964532852173],[1341778369359842e-8,3767569371655211e-9,5.431851863861084],[1341778369359842e-8,3767564371655211e-9,6.018896579742432],[1341778369359842e-8,3767559371655211e-9,5.928933143615723],[1341778869359842e-8,3767554371655211e-9,5.8936662673950195],[1341779369359842e-8,3767549371655211e-9,5.619397163391113],[1341779369359842e-8,3767544371655211e-9,-2.0070877075195312],[1341779369359842e-8,3767539371655211e-9,-3.071927309036255],[1341779869359842e-8,3767534371655211e-9,-3.283550977706909],[1341780369359842e-8,3767529371655211e-9,-3.422959804534912],[1341780369359842e-8,3767524371655211e-9,-3.448514938354492],[1341780369359842e-8,3767519371655211e-9,-3.7688655853271484],[1341780869359842e-8,3767514371655211e-9,-4.802961349487305],[1341781369359842e-8,3767509371655211e-9,-6.43353796005249],[1341781369359842e-8,3767504371655211e-9,-7.628770351409912],[1341781369359842e-8,3767499371655211e-9,-8.946449279785156],[1341781869359842e-8,3767494371655211e-9,-9.244831085205078],[1341782369359842e-8,3767489371655211e-9,-10.476202964782715],[1341782369359842e-8,3767484371655211e-9,-12.233419418334961],[1341782369359842e-8,3767479371655211e-9,-13.30055046081543],[1341782869359842e-8,3767474371655211e-9,-14.014792442321777],[1341783369359842e-8,3767469371655211e-9,-14.270424842834473],[1341783369359842e-8,3767464371655211e-9,-14.97888469696045],[1341783369359842e-8,3767459371655211e-9,-15.168658256530762],[1341783869359842e-8,3767454371655211e-9,-16.535743713378906],[1341784369359842e-8,3767449371655211e-9,-17.253616333007812],[1341784369359842e-8,3767444371655211e-9,-17.6441650390625],[1341784369359842e-8,3767439371655211e-9,-18.0341854095459],[1341784869359842e-8,3767434371655211e-9,-18.871644973754883],[1341785369359842e-8,3767429371655211e-9,-19.163223266601562],[1341785369359842e-8,3767424371655211e-9,-19.695068359375],[1341785369359842e-8,3767419371655211e-9,-20.70911407470703],[1341785869359842e-8,3767414371655211e-9,-21.725101470947266],[1341786369359842e-8,3767409371655211e-9,-22.625085830688477],[1341786369359842e-8,3767404371655211e-9,-23.037151336669922],[1341786369359842e-8,3767399371655211e-9,-23.50472640991211],[1341786869359842e-8,3767394371655211e-9,-23.62897491455078],[1341787369359842e-8,3767389371655211e-9,-24.318498611450195],[1341787369359842e-8,3767384371655211e-9,-25.25609588623047],[1341787369359842e-8,3767379371655211e-9,-26.168140411376953],[1341787869359842e-8,3767374371655211e-9,-26.721012115478516],[1341788369359842e-8,3767369371655211e-9,-27.352996826171875],[1341788369359842e-8,3767364371655211e-9,-27.534730911254883],[1341788369359842e-8,3767359371655211e-9,-28.3227596282959],[1341788869359842e-8,3767354371655211e-9,-28.664649963378906],[1341789369359842e-8,3767349371655211e-9,-28.916494369506836],[1341789369359842e-8,3767344371655211e-9,-29.92958641052246],[1341789369359842e-8,3767339371655211e-9,-30.606996536254883],[1341789869359842e-8,3767334371655211e-9,-31.010469436645508],[1341790369359842e-8,3767329371655211e-9,-31.10230827331543],[1341790369359842e-8,3767324371655211e-9,-31.232851028442383],[1341790369359842e-8,3767319371655211e-9,-31.465221405029297],[1341790869359842e-8,3767314371655211e-9,-31.98632049560547],[1341791369359842e-8,3767309371655211e-9,-32.619144439697266],[1341791369359842e-8,3767304371655211e-9,-32.685813903808594],[1341791369359842e-8,3767299371655211e-9,-32.63957214355469],[1341791869359842e-8,3767294371655211e-9,-32.676307678222656],[1341792369359842e-8,3767289371655211e-9,-32.96323013305664],[1341792369359842e-8,3767284371655211e-9,-33.133304595947266],[1341792369359842e-8,3767279371655211e-9,-33.098289489746094],[1341792869359842e-8,3767274371655211e-9,-32.94529724121094]],risk:[[.08,.32,0,.6],"高风险",.6]};function De(s){var r=Math.PI/180,d=6378137,i=20037508342789244e-9,g=Math.abs(s[0])<=180?s[0]:s[0]-Math.sign(s[0])*360,y=[d*g*r,d*Math.log(Math.tan(Math.PI*.25+.5*s[1]*r))];return y[0]>i&&(y[0]=i),y[0]<-i&&(y[0]=-i),y[1]>i&&(y[1]=i),y[1]<-i&&(y[1]=-i),y}const B1=(s,r,d,i)=>{if(!s.getSource(`${i}-source`)){const g={type:"Feature",properties:{},geometry:{coordinates:[r,d],type:"LineString"}};s.addSource(`${i}-source`,{type:"geojson",data:g})}s.getLayer(`${i}-layer`)?s.setLayoutProperty(`${i}-layer`,"visibility","visible"):s.addLayer({id:`${i}-layer`,type:"line",source:`${i}-source`,layout:{"line-join":"round","line-cap":"round",visibility:"visible"},paint:{"line-color":"#888","line-width":8}})},$e=(s,r)=>{s.getLayer(`${r}-layer`)&&s.setLayoutProperty(`${r}-layer`,"visibility","none")},H1=(s,r)=>{s.getLayer(`${r}-layer`)&&s.removeLayer(`${r}-layer`),s.getSource(`${r}-source`)&&s.removeSource(`${r}-source`)},R1=(s,r,d)=>{console.log(r,d);const i=Math.min(...r,...d),g=Math.max(...r,...d),y=Math.min(r.length,d.length),m={title:{text:"断面形态"},grid:{width:"80%",height:"80%",top:"10%",show:!0,backgroundColor:"#d2f2ff"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["当前横截面","对比横截面"],right:"10%",top:"2%"},xAxis:{type:"category",data:new Array(y).fill(0).map((p,v)=>v*5),position:"bottom"},yAxis:{type:"value",splitLine:{show:!1},axisLine:{show:!1},scale:!0,max:Math.round(g+2),min:Math.round(i-2)},series:[{name:"当前横截面",data:r.slice(0,y).map(p=>p.toFixed(2)),type:"line",smooth:!0,areaStyle:{opacity:.8,color:"#2a5fdb"}},{name:"对比横截面",data:d.slice(0,y).map(p=>p.toFixed(2)),type:"line",smooth:!0,lineStyle:{color:"#ff7070"},itemStyle:{color:"#ff7070"}}]};s.setOption(m)},W1=(s,r)=>{const d=Math.min(...r),i=Math.max(...r),g={title:{text:"断面冲淤"},grid:{width:"80%",height:"80%",top:"10%",show:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},xAxis:{type:"category",data:r.map((y,m)=>m*5),position:"bottom"},yAxis:{type:"value",splitLine:{show:!1},axisLine:{show:!1},scale:!0,max:Math.round(i+2),min:Math.round(d-2)},series:[{name:"冲淤程度",data:r.map(y=>y.toFixed(2)),type:"line",smooth:!0}]};s.setOption(g)},G1=(s,r,d,i)=>{const g=Math.min(...r,...d),y=Math.max(...r,...d),m=Math.min(r.length,d.length),p=[];for(let u=0;u<m;u+=10)p.push(u);p.push(m-1);const v=[];for(let u=0,_=0;u<p.length;u++,_++)if(u!==p.length-1){const E=p[u],c=p[u+1];for(let R=E;R<c;R++)v.push(i[_])}const S={title:{text:"断面坡比"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:[{top:"10%",height:"40%",show:!0},{top:"58%",height:"35%",show:!0}],legend:{data:["当前横截面","对比横截面","坡比"],right:"10%",top:"2%"},axisPointer:{link:[{xAxisIndex:"all"}]},xAxis:[{type:"category",data:d.map((u,_)=>_*5),position:"bottom"},{gridIndex:1,type:"category",data:v.map((u,_)=>_*5),position:"bottom",axisLine:{show:!0,onZero:!1}}],yAxis:[{type:"value",splitLine:{show:!1},scale:!0,max:Math.round(y+1),min:Math.round(g-1)},{type:"value",splitLine:{show:!1},gridIndex:1,axisLine:{show:!1},scale:!0}],series:[{name:"当前横截面",type:"line",smooth:!0,data:r.map(u=>u.toFixed(2))},{name:"对比横截面",type:"line",smooth:!0,data:d.map(u=>u.toFixed(2)),lineStyle:{color:"#ff7070"},itemStyle:{color:"#ff7070"}},{name:"坡比",type:"bar",smooth:!0,data:v.map(u=>u.toFixed(4)),yAxisIndex:1,xAxisIndex:1,barCategoryGap:"0%",itemStyle:{normal:{color:function(u){let _=0;return p.some((c,R)=>{if(u.dataIndex<c)return _=R-1,!0}),["#059669","#84cc16"][_%2]},label:{show:!1}}}}]};s.setOption(S)},D=s=>(ne("data-v-9bd054f9"),s=s(),ae(),s),q1={class:"all"},J1={class:"model-content-container"},O1={class:"model-item-container"},X1={class:"model-choice"},Z1={class:"basemap-radio-container"},K1=["checked"],Q1=D(()=>t("label",{class:"tab",for:"radio-1"},"近岸动力分析",-1)),Y1=["checked"],e7=D(()=>t("label",{class:"tab",for:"radio-2"},"近岸演变分析",-1)),t7=D(()=>t("span",{class:"glider"},null,-1)),o7={class:"main-page"},l7={class:"user-react"},n7={class:"title"},a7=D(()=>t("div",{class:"title-icon uricon"},null,-1)),s7={class:"title-text"},i7={class:"buttons"},d7=["onClick"],r7={class:"data-panel"},c7=D(()=>t("div",{class:"title"},[t("div",{class:"title-icon dpicon"}),t("div",{class:"title-text"},"数据面板")],-1)),u7={class:"dp-content"},m7={class:"custom-tree-node",style:{width:"100%"}},p7={class:"el-dropdown-link",style:{width:"100%"}},_7={class:"layer-panel"},f7=D(()=>t("div",{class:"title"},[t("div",{class:"title-icon lpicon"}),t("div",{class:"title-text"},"图层面板")],-1)),v7={class:"lp-content"},h7={class:"checkBox"},y7={class:"main-page"},b7={class:"data-panel",style:{height:"40vh"}},g7=D(()=>t("div",{class:"title"},[t("div",{class:"title-icon dpicon"}),t("div",{class:"title-text"},"数据面板")],-1)),x7={class:"dp-content",style:{height:"32vh"}},w7={class:"evolution-tree-node",style:{width:"100%"}},k7={class:"el-dropdown-link",style:{width:"100%"}},S7={class:"layer-panel"},C7=D(()=>t("div",{class:"title"},[t("div",{class:"title-icon lpicon"}),t("div",{class:"title-text"},"图层面板")],-1)),I7={class:"dp-content",style:{height:"32vh"}},D7={class:"evolution-tree-node",style:{width:"100%"}},$7={class:"el-dropdown-link",style:{width:"100%"}},P7={class:"dialog-footer"},M7={class:"main"},V7={class:"map-container"},L7=D(()=>t("canvas",{id:"GPUFrame"},null,-1)),F7={class:"model-tooltip-container"},A7={key:0,class:"model-container"},z7=D(()=>t("div",{style:{"font-size":"large","padding-bottom":"16px"}}," 近岸演变分析模型 ",-1)),E7={class:"model-list"},j7=D(()=>t("img",{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",class:"image",style:{"margin-left":"0","margin-right":"0"}},null,-1)),U7={style:{padding:"4px 0px"}},T7=D(()=>t("img",{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",class:"image",style:{"margin-left":"0","margin-right":"0"}},null,-1)),N7={style:{padding:"4px 0px"}},B7=D(()=>t("img",{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",class:"image",style:{"margin-left":"0","margin-right":"0"}},null,-1)),H7={style:{padding:"4px 0px"}},R7={key:1,class:"model-params-container"},W7=D(()=>t("div",{style:{"font-size":"large","padding-bottom":"16px"}}," 模型参数设置 ",-1)),G7={class:"charts-container"},q7={class:"analysisCenter"},J7=D(()=>t("div",{class:"background"},null,-1)),O7=D(()=>t("iframe",{id:"inlineFrameExample",title:"Inline Frame Example",width:"100%",height:"100%",src:"http://172.21.212.165:8050/#/analysis/73c29959-16f0-4478-8526-0927d1aff6f7"},null,-1)),X7={__name:"StabilityAnalysis2",setup(s){const r="http://119.45.198.54:80/tileServer",d=f(!1),i=f(!1),g=f(!1),y=f(["水文条件选择","模型参数设置","模型计算","模型运行状态"]),m=f(null),p=f("模型配置"),v=f(!1),S=f(!1),u=f(!0),_=f(!1),E={"1998-01-dem":"199801_dem","2004-08-dem":"200408_dem","2006-02-dem":"200602_dem"},c={"1998-01-dem":{min:-64.1,max:11.97},"2004-08-dem":{min:-69.46,max:45.16},"2006-02-dem":{min:-71.16,max:40.1}},R=()=>{v.value=!1,u.value=!0,_.value=!1,S.value=!1},Me=()=>{if(v.value=!0,_.value=!0,u.value=!1,g.value=!1,S.value=!0,w){for(let e in E)console.log(e),!w.getLayer("ras-"+e)&&w.addLayer({id:"ras-"+e,type:"raster",source:e,paint:{"raster-color":["interpolate",["linear"],["raster-value"],-60-c[e].min,"rgba(0,100,255,1)",-30-c[e].min,"rgba(0,150,255,1)",-20-c[e].min,"rgba(102,153,255,1)",-16-c[e].min,"rgba(0,204,255,1)",-15-c[e].min,"rgba(153,255,255,1)",-13.5-c[e].min,"rgba(255,255,255,1)",-13-c[e].min,"rgba(255,255,153,1)",-11-c[e].min,"rgba(230,230,128,1)",-10-c[e].min,"rgba(164,204,51,1)",-8-c[e].min,"rgba(153,204,51,1)",-5-c[e].min,"rgba(39,139,51,1)",-2-c[e].min,"rgba(10,143,82,1)",0-c[e].min,"rgba(0,113,11, 1)"],"raster-color-mix":[c[e].max-c[e].min,0,0,0],"raster-opacity":1,"raster-color-range":[0,c[e].max-c[e].min]},layout:{visibility:"none"}});w.addControl(ie),w.on("draw.create",function(e){console.log("aaa"),console.log(e.features),re.value=crypto.randomUUID(),J.value=!0;let o=e.features[0],x=De(o.geometry.coordinates[0]),$=De(o.geometry.coordinates[1]);de.value[re.value]=[x,$]})}},ge=f(),j=Pe();j.modelStatus="undefined";const Ve=e=>{B({type:"success",offset:100,message:"水文条件："+e})},Le=e=>{switch(e){case 0:d.value=!0;break;case 1:i.value=!0;break;case 2:B({message:"模型计算中",offset:100}),j.modelStartTime=Date.now(),j.modelProgress=0,j.modelStatus="pending";const o=setInterval(()=>{j.modelProgress+=Math.random()*100/3600/.5/24*3,j.modelProgress>=100&&(j.modelStatus="success",B({type:"success",offset:100,message:"模型计算完成"}),clearInterval(o))},3e3);g.value=!0;break;case 3:g.value=!0;break}},Fe=e=>{B({type:"success",message:"模型参数设置成功",offset:100}),console.log(e)},Ae=(e,o)=>{o.nodeID?m.value=o.nodeID:m.value=null},ze=e=>{m.value&&e==="add"&&we.value.push(m.value)},Ee=G([{label:"旱季",children:[{label:"输入数据",children:[{label:"fort.13",nodeID:"dry-13"},{label:"fort.14",nodeID:"dry-14"},{label:"fort.15",nodeID:"dry-15"},{label:"fort.16",nodeID:"dry-16"},{label:"fort.19",nodeID:"dry-19"},{label:"fort.20",nodeID:"dry-20"}]},{label:"输出数据",children:[{label:"flow",nodeID:"dry-flow"}]}]},{label:"洪季",children:[{label:"输入数据",children:[{label:"fort.13",nodeID:"flood-13"},{label:"fort.14",nodeID:"flood-14"},{label:"fort.15",nodeID:"flood-15"},{label:"fort.16",nodeID:"flood-16"},{label:"fort.19",nodeID:"flood-19"},{label:"fort.20",nodeID:"flood-20"}]},{label:"输出数据",children:[{label:"flow",nodeID:"flood-flow"}]}]},{label:"20年一遇",children:[{label:"输入数据",children:[{label:"fort.13",nodeID:"20-13"},{label:"fort.14",nodeID:"20-14"},{label:"fort.15",nodeID:"20-15"},{label:"fort.16",nodeID:"20-16"},{label:"fort.19",nodeID:"20-19"},{label:"fort.20",nodeID:"20-20"}]},{label:"输出数据",children:[{label:"flow",nodeID:"20-flow"}]}]}]),se={children:"children",label:"label"},xe=f([]),we=f([]);let F,je="/api/data/flow/configJson/flood",Ue="/api/data/flow/texture/flood/",Te=G(new r1("floodFlow",je,Ue));const Ne=e=>{console.log("handle checked layer",e);for(let o=0;o<e.length;o++)if(e[o].includes("flow")){F.getLayer("floodFlow")?F.setLayoutProperty("floodFlow","visibility","visible"):F.addLayer(Te),F&&F.flyTo({center:[120.54070965313991,32.042615280683805],pitch:31.99999999999988,bearing:0,zoom:10.245427972376211,speed:1,essential:!0});return}F.getLayer("floodFlow")?F.setLayoutProperty("floodFlow","visibility","none"):console.log()},C=f(null),U=f([{label:"1998-01-dem",nodeID:"1998-01-dem-id",type:"dem"},{label:"2004-08-dem",nodeID:"2004-08-dem-id",type:"dem"},{label:"2006-02-dem",nodeID:"2006-02-dem-id",type:"dem"}]),q=G([{label:"地形数据",type:null,children:[{label:"1998-01-dem",nodeID:"1998-01-dem-id",type:"dem"},{label:"2004-08-dem",nodeID:"2004-08-dem-id",type:"dem"},{label:"2006-02-dem",nodeID:"2006-02-dem-id",type:"dem"}]},{label:"断面数据",type:null,children:[]},{label:"示例断面形态",nodeID:"20200301-section-graph",type:"section-graph"},{label:"示例断面坡比",nodeID:"20200301-rate",type:"rate"},{label:"示例断面冲淤",nodeID:"20200301-chongyu",type:"chongyu"}]),Be=(e,o)=>{console.log(o),o.nodeID?C.value=o:C.value=null},He=e=>{if(console.log(C.value),C.value&&e==="layer")U.value===null?U.value=[C.value]:U.value.push(C.value);else if(C.value&&e==="visualize"){const o=C.value.type;console.log(o),pe.value=!0;const x=N1;A.clear(),o==="section-graph"?setTimeout(()=>{const $=x.beforeSection,L=x.section;R1(A,L.map(P=>P[2]),$.map(P=>P[2])),A.resize()},1):o==="rate"?setTimeout(()=>{const $=x.beforeSection,L=x.section;G1(A,L.map(P=>P[2]),$.map(P=>P[2]),x.SA[2]),A.resize()},1):o==="chongyu"&&setTimeout(()=>{const $=x.section,L=x.beforeSection,P=Math.min($.length,L.length),X=[];$.some((_e,Z)=>{if(Z>=P)return!0;X.push(_e[2]-L[Z][2])}),console.log(X),W1(A,X),A.resize()},1)}else C.value&&e==="delete"||C.value&&e==="add"&&console.log("12321")},Re=(e,o)=>{o.nodeID?C.value=o:C.value=null},We=e=>{console.log(e),C.value&&U.value&&e==="delete"&&(U.value=U.value.filter(o=>o.nodeID!==C.value.nodeID),C.value.type==="section-geojson"&&($e(w,C.value.nodeID),H1(w,C.value.nodeID)))},Ge=(e,o)=>{if(console.log(e,o),o)if(e.type==="section-geojson"){const x=de.value[e.nodeID];B1(w,x[0],x[1],e.nodeID),console.log(w.getLayoutProperty(`${e.nodeID}-layer`,"visibility"))}else e.type==="dem"&&(console.log("111"),w.getLayer("ras-"+e.label)?w.setLayoutProperty("ras-"+e.label,"visibility","visible"):w.addLayer({id:"ras-"+e.label,type:"raster",source:e.label,paint:{"raster-color":["interpolate",["linear"],["raster-value"],-60-c[e.label].min,"rgba(0,100,255,1)",-30-c[e.label].min,"rgba(0,150,255,1)",-20-c[e.label].min,"rgba(102,153,255,1)",-16-c[e.label].min,"rgba(0,204,255,1)",-15-c[e.label].min,"rgba(153,255,255,1)",-13.5-c[e.label].min,"rgba(255,255,255,1)",-13-c[e.label].min,"rgba(255,255,153,1)",-11-c[e.label].min,"rgba(230,230,128,1)",-10-c[e.label].min,"rgba(164,204,51,1)",-8-c[e.label].min,"rgba(153,204,51,1)",-5-c[e.label].min,"rgba(39,139,51,1)",-2-c[e.label].min,"rgba(10,143,82,1)",0-c[e.label].min,"rgba(0,113,11, 1)"],"raster-color-mix":[c[e.label].max-c[e.label].min,0,0,0],"raster-opacity":1,"raster-color-range":[0,c[e.label].max-c[e.label].min]}}));else e.type==="section-geojson"?($e(w,e.nodeID),console.log(w.getLayoutProperty(`${e.nodeID}-layer`,"visibility"))):e.type==="dem"&&w.setLayoutProperty("ras-"+e.label,"visibility","none")};let w;const ie=new i1({displayControlsDefault:!1,controls:{line_string:!0},styles:[{id:"gl-draw-line",type:"line",filter:["all",["==","$type","LineString"],["==","mode","draw_line_string"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#D20C0C","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-halo-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["==","mode","draw_line_string"]],paint:{"circle-radius":5,"circle-color":"#FFF"}},{id:"gl-draw-polygon-and-line-vertex-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["==","mode","draw_line_string"]],paint:{"circle-radius":3,"circle-color":"#D20C0C"}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","$type","LineString"],["!=","mode","draw_line_string"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":3}}]}),de=f({}),re=f(),qe=f(!1),J=f(!1),W=f(""),Je=()=>{},Oe=()=>{J.value=!1,ie.deleteAll(),W.value=""},Xe=()=>{J.value=!1,qe.value=!1,ie.deleteAll(),q[1].children.push({label:W.value,nodeID:re.value,type:"section-geojson"}),console.log(de),W.value=""},ce=f(),M=f({name:"",date:"",beforeDate:"",section:""}),Ze=G({name:[{required:!0,message:"Please input Activity name",trigger:"blur"}],section:[{required:!0,trigger:"change"}],date:[{required:!0,trigger:"change"}],beforeDate:[{required:!0,trigger:"change"}]}),ue=f(!1),O=f(null),ke=oe(()=>{let e=[];return q.forEach(o=>{o.label==="断面数据"&&(e=o.children)}),console.log(e),e}),Se=oe(()=>{let e=[];return q.forEach(o=>{o.label==="地形数据"&&(e=o.children)}),console.log(e),e}),Ke=()=>{if(ke.value.length===0){B({message:"当前不存在任意断面, 请先确定断面",type:"warning"});return}ue.value=!0},me=e=>{O.value=e,ue.value=!1},Qe=async(e,o)=>{e&&await e.validate((x,$)=>{x?(O.value=null,B("模型开始计算"),console.log(M.value),q.push({label:M.value.name,nodeID:"20200301-section-graph",type:o}),e.resetFields()):console.log("error submit!",$)})},Ye=e=>{e.resetFields(),console.log(M.value),O.value=null},Ce=f(),pe=f(!1);let A=null;const e1=()=>{pe.value=!1};return n1(async()=>{A=a1(Ce.value),w=await s1(ge.value),console.log("init map"),w.addSource("1998-01-dem",{type:"raster",tiles:[r+"/tile/raster/river/199801_dem/{x}/{y}/{z}"],tileSize:256,minzoom:1,maxzoom:15,bounds:[118.5791,31.0413,121.7718,32.4197]}),w.addSource("2004-08-dem",{type:"raster",tiles:[r+"/tile/raster/river/200408_dem/{x}/{y}/{z}"],tileSize:256,minzoom:1,maxzoom:15,bounds:[118.5791,31.0413,121.7718,32.4197]}),w.addSource("2006-02-dem",{type:"raster",tiles:[r+"/tile/raster/river/200602_dem/{x}/{y}/{z}"],tileSize:256,minzoom:1,maxzoom:15,bounds:[118.5791,31.0413,121.7718,32.4197]}),F=w}),(e,o)=>{const x=h("el-dropdown-item"),$=h("el-dropdown-menu"),L=h("el-dropdown"),P=h("el-tree"),X=h("el-checkbox"),_e=h("el-checkbox-group"),Z=h("el-input"),T=h("el-button"),t1=h("el-dialog"),fe=h("el-card"),K=h("el-form-item"),ve=h("el-option"),he=h("el-select"),o1=h("el-form");return b(),I("div",q1,[l(d1,{ModelName:"岸坡稳定性分析模型"}),t("div",J1,[t("div",O1,[t("div",X1,[t("div",Z1,[t("input",{type:"radio",id:"radio-1",name:"tabs",checked:u.value,onClick:o[0]||(o[0]=a=>R())},null,8,K1),Q1,t("input",{type:"radio",id:"radio-2",name:"tabs",checked:_.value,onClick:o[1]||(o[1]=a=>Me())},null,8,Y1),e7,t7])]),ee(t("div",o7,[t("div",l7,[t("div",n7,[a7,t("div",s7,z(p.value),1)]),t("div",i7,[(b(!0),I(Q,null,Y(y.value,(a,V)=>(b(),I("div",{class:"button",key:V,onClick:Z7=>Le(V)},[t("div",null,z(a),1)],8,d7))),128))])]),t("div",r7,[c7,t("div",u7,[l(P,{style:{"max-height":"28vh",overflow:"auto"},data:Ee,props:se,onNodeContextmenu:Ae,"node-key":"nodeID"},{default:n(({node:a,data:V})=>[t("div",m7,[l(L,{onCommand:ze,trigger:"contextmenu",placement:"bottom-end",style:{width:"100%"}},Ie({default:n(()=>[t("div",p7,z(a.label),1)]),_:2},[V.nodeID?{name:"dropdown",fn:n(()=>[l($,null,{default:n(()=>[l(x,{command:"add"},{default:n(()=>[k("添加至图层")]),_:1})]),_:1})]),key:"0"}:void 0]),1024)])]),_:1},8,["data"])])]),t("div",_7,[f7,t("div",v7,[t("div",h7,[l(_e,{modelValue:xe.value,"onUpdate:modelValue":o[2]||(o[2]=a=>xe.value=a),onChange:Ne},{default:n(()=>[(b(!0),I(Q,null,Y(we.value,a=>(b(),N(X,{key:a,label:a,value:a},{default:n(()=>[k(z(a),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])])])],512),[[te,!v.value]]),ee(t("div",y7,[t("div",b7,[g7,t("div",x7,[l(P,{style:{"max-width":"600px"},data:q,props:se,onNodeContextmenu:Be,"node-key":"nodeID"},{default:n(({node:a,data:V})=>[t("div",w7,[l(L,{onCommand:He,trigger:"contextmenu",placement:"bottom-end",style:{width:"100%"}},Ie({default:n(()=>[t("div",k7,z(a.label),1)]),_:2},[V.type==="dem"||V.type==="section-geojson"?{name:"dropdown",fn:n(()=>[l($,null,{default:n(()=>[l(x,{command:"layer"},{default:n(()=>[k("添加至图层")]),_:1}),l(x,{command:"delete"},{default:n(()=>[k("删除")]),_:1})]),_:1})]),key:"0"}:void 0,V.type&&V.type!=="dem"&&V.type!=="section-geojson"?{name:"dropdown",fn:n(()=>[l($,null,{default:n(()=>[l(x,{command:"visualize"},{default:n(()=>[k("可视化")]),_:1}),l(x,{command:"delete"},{default:n(()=>[k("删除")]),_:1})]),_:1})]),key:"1"}:void 0]),1032,["onCommand"])])]),_:1},8,["data"])])]),t("div",S7,[C7,t("div",I7,[l(P,{style:{"max-width":"600px"},data:U.value,props:se,onNodeContextmenu:Re,"node-key":"nodeID","show-checkbox":"",onCheckChange:Ge},{default:n(({node:a,data:V})=>[t("div",D7,[l(L,{onCommand:We,trigger:"contextmenu",placement:"bottom-end",style:{width:"100%"}},{dropdown:n(()=>[l($,null,{default:n(()=>[l(x,{command:"delete"},{default:n(()=>[k("删除图层")]),_:1})]),_:1})]),default:n(()=>[t("div",$7,z(a.label),1)]),_:2},1032,["onCommand"])])]),_:1},8,["data"])])])],512),[[te,v.value]])]),l(t1,{modelValue:J.value,"onUpdate:modelValue":o[4]||(o[4]=a=>J.value=a),title:"绘制断面确认",width:"40vh","before-close":Je},{footer:n(()=>[t("div",P7,[l(T,{onClick:Oe},{default:n(()=>[k("取消")]),_:1}),l(T,{type:"primary",onClick:Xe,disabled:!W.value.length},{default:n(()=>[k(" 确认 ")]),_:1},8,["disabled"])])]),default:n(()=>[l(Z,{modelValue:W.value,"onUpdate:modelValue":o[3]||(o[3]=a=>W.value=a),style:{width:"240px"},placeholder:"请输入断面名称"},null,8,["modelValue"])]),_:1},8,["modelValue"]),t("div",M7,[t("div",V7,[t("div",{id:"map",ref_key:"mapContainerRef",ref:ge},null,512),L7]),t("div",F7,[v.value?(b(),I("div",{key:0,class:"showAnalysisButton",onClick:Ke}," 演变分析计算 ")):H("",!0)]),ue.value?(b(),I("div",A7,[z7,t("div",E7,[l(fe,{style:{height:"300px","object-fit":"cover"}},{default:n(()=>[j7,t("div",U7,[l(T,{onClick:o[5]||(o[5]=a=>me("section-graph"))},{default:n(()=>[k("断面形态")]),_:1})])]),_:1}),l(fe,{style:{height:"300px","object-fit":"cover"}},{default:n(()=>[T7,t("div",N7,[l(T,{onClick:o[6]||(o[6]=a=>me("rate"))},{default:n(()=>[k("断面坡比")]),_:1})])]),_:1}),l(fe,{style:{height:"300px","object-fit":"cover"}},{default:n(()=>[B7,t("div",H7,[l(T,{onClick:o[7]||(o[7]=a=>me("chongyu"))},{default:n(()=>[k("断面冲淤")]),_:1})])]),_:1})])])):H("",!0),O.value?(b(),I("div",R7,[W7,l(o1,{ref_key:"paramsRef",ref:ce,rules:Ze,model:M.value,"label-width":"auto",style:{width:"600px"}},{default:n(()=>[l(K,{label:"结果名称",prop:"name"},{default:n(()=>[l(Z,{modelValue:M.value.name,"onUpdate:modelValue":o[8]||(o[8]=a=>M.value.name=a)},null,8,["modelValue"])]),_:1}),l(K,{label:"地形断面",prop:"section"},{default:n(()=>[l(he,{modelValue:M.value.section,"onUpdate:modelValue":o[9]||(o[9]=a=>M.value.section=a)},{default:n(()=>[(b(!0),I(Q,null,Y(ke.value,a=>(b(),N(ve,{key:a.label,label:a.label,value:a.nodeID},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(K,{label:"当前地形数据",prop:"date"},{default:n(()=>[l(he,{modelValue:M.value.date,"onUpdate:modelValue":o[10]||(o[10]=a=>M.value.date=a)},{default:n(()=>[(b(!0),I(Q,null,Y(Se.value,a=>(b(),N(ve,{key:a.label,label:a.label,value:a.nodeID},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(K,{label:"对比地形数据",prop:"beforeDate"},{default:n(()=>[l(he,{modelValue:M.value.beforeDate,"onUpdate:modelValue":o[11]||(o[11]=a=>M.value.beforeDate=a)},{default:n(()=>[(b(!0),I(Q,null,Y(Se.value,a=>(b(),N(ve,{key:a.label,label:a.label,value:a.nodeID},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(K,null,{default:n(()=>[l(T,{type:"primary",onClick:o[12]||(o[12]=a=>Qe(ce.value,O.value))},{default:n(()=>[k("运行模型")]),_:1}),l(T,{onClick:o[13]||(o[13]=a=>Ye(ce.value))},{default:n(()=>[k("取消")]),_:1})]),_:1})]),_:1},8,["rules","model"])])):H("",!0),ee(t("div",G7,[t("div",{class:"close-icon",onClick:e1},"关闭"),t("div",{ref_key:"echartRef",ref:Ce,class:"chart"},null,512)],512),[[te,pe.value]]),d.value?(b(),N(v1,{key:2,onClose:o[14]||(o[14]=a=>d.value=!d.value),onCondition:Ve})):H("",!0),i.value?(b(),N(k1,{key:3,onClose:o[15]||(o[15]=a=>i.value=!i.value),onParams:Fe})):H("",!0),g.value?(b(),N(T1,{key:4,onClose:o[16]||(o[16]=a=>g.value=!g.value)})):H("",!0)])]),ee(t("div",q7,[J7,t("div",{class:"back",onClick:o[17]||(o[17]=a=>{S.value=!S.value,u.value=!0,_.value=!1})}),O7],512),[[te,S.value]])])}}},t3=le(X7,[["__scopeId","data-v-9bd054f9"]]);export{t3 as default};
